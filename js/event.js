// === 3. NG√ÇN H√ÄNG S·ª∞ KI·ªÜN (EVENT BANK) ===
// ƒê√¢y l√† tr√°i tim c·ªßa Giai ƒëo·∫°n 4, to√†n b·ªô c·ªët truy·ªán n·∫±m ·ªü ƒë√¢y.
const events = {
    // --- H·ªåC K·ª≤ 1 ---
    'START_KY_1': {
        image: "https://placehold.co/600x300/A00000/FFFFFF?text=Cong+Parabol+HUST",
        text: "Ch√†o m·ª´ng t√¢n sinh vi√™n K70! B·∫°n ƒë√£ ƒë·∫∑t ch√¢n ƒë·∫øn c·ªïng Parabol. C·∫£ m·ªôt tu·∫ßn SHCD ƒëang ch·ªù.",
        choices: [
            { text: "Nghi√™m t√∫c ƒëi h·ªçc tu·∫ßn SHCD", effects: { happiness: -10, health: -5 }, nextEvent: 'SHCD_NGHIEM_TUC' },
            { text: "Tr·ªën ƒëi net ·ªü KTX", effects: { happiness: +10 }, nextEvent: 'TRON_DI_NET' },
            { text: "T√¨m ƒë∆∞·ªùng ƒë·∫øn gi·∫£ng ƒë∆∞·ªùng D8", effects: { health: -10 }, nextEvent: 'TIM_D8' }
        ]
    },
    'SHCD_NGHIEM_TUC': {
        image: "https://placehold.co/600x300/6B7280/FFFFFF?text=Hoi+Truong+C2",
        text: "B·∫°n ng·ªìi trong h·ªôi tr∆∞·ªùng C2. Th·∫ßy n√≥i g√¨ ƒë√≥ v·ªÅ 'chu·∫©n ƒë·∫ßu ra' v√† '450 TOEIC'. Bu·ªìn ng·ªß qu√°...",
        choices: [
            { text: "C·ªë g·∫Øng th·ª©c ƒë·ªÉ nghe", effects: { gpa: +0.05, happiness: -5 }, nextEvent: 'GIAI_TICH_1' },
            { text: "Ng·ªß g·∫≠t", effects: { health: +10, happiness: +5 }, nextEvent: 'BI_BAT' }
        ]
    },
    'TRON_DI_NET': {
        image: "https://placehold.co/600x300/1D4ED8/FFFFFF?text=GAME+THU+KTX",
        text: "B·∫°n tr·ªën ƒë∆∞·ª£c ra qu√°n net ·ªü KTX. M√πi m√¨ t√¥m v√† kh√¥ng kh√≠ th·∫≠t quen thu·ªôc. L√†m v√°n LOL ƒë√£.",
        choices: [
            { text: "Ch∆°i 1 tr·∫≠n th√¥i r·ªìi v·ªÅ", effects: { happiness: +15, health: -5 }, nextEvent: 'GIAI_TICH_1' },
            { text: "Th√¥ng ƒë√™m!", effects: { happiness: +30, health: -40 }, nextEvent: 'NGU_QUEN_THI' }
        ]
    },
    'TIM_D8': {
        image: "https://placehold.co/600x300/9CA3AF/FFFFFF?text=Lac+Duong",
        text: "B·∫°n ƒëi l·∫°c qua c·∫£ khu Vi·ªán... Cu·ªëi c√πng c≈©ng t√¨m th·∫•y D8 nh∆∞ng ƒë√£ ki·ªát s·ª©c.",
        choices: [
            { text: "V√†o h·ªçc Gi·∫£i T√≠ch...", nextEvent: 'GIAI_TICH_1' }
        ]
    },
    'GIAI_TICH_1': {
        image: "https://placehold.co/600x300/374151/FFFFFF?text=Giai+Tich+1",
        text: "Gi·ªù Gi·∫£i T√≠ch 1 ƒë·∫ßu ti√™n. Gi·∫£ng vi√™n b·∫Øt ƒë·∫ßu vi·∫øt 'epsilon' v√† 'delta' l√™n b·∫£ng. B·∫°n kh√¥ng hi·ªÉu g√¨ c·∫£.",
        choices: [
            { text: "C·ªë g·∫Øng ch√©p b√†i", effects: { gpa: +0.1, health: -5, happiness: -5 }, nextEvent: 'DEFAULT_EVENT_KY_1' },
            { text: "L·∫•y ƒëi·ªán tho·∫°i ra l∆∞·ªõt Facebook", effects: { happiness: +10 }, nextEvent: 'DEFAULT_EVENT_KY_1' }
        ]
    },
    'BI_BAT': {
        image: "https://placehold.co/600x300/EF4444/FFFFFF?text=BI+BAT+QUA+TANG",
        text: "B·∫°n ng·ªß g·∫≠t v√† b·ªã gi·∫£ng vi√™n ph√°t hi·ªán! 'Em kia! ƒê·ª©ng d·∫≠y! T√™n g√¨? L·ªõp n√†o?'",
        choices: [
            { text: "Xin l·ªói th·∫ßy v√† h·ª©a kh√¥ng t√°i ph·∫°m", effects: { gpa: -0.1, happiness: -15 }, nextEvent: 'GIAI_TICH_1' },
            { text: "(N√≥i l√≠ nh√≠) 'Em... em...'", nextEvent: 'GAME_OVER_VO_LE' } // Bad Ending t·ª©c th√¨
        ]
    },
    'NGU_QUEN_THI': {
        image: "https://placehold.co/600x300/4B5563/FFFFFF?text=NGU+QUEN+THI",
        text: "B·∫°n c√†y game c·∫£ ƒë√™m. S√°ng h√¥m sau, b·∫°n ki·ªát s·ª©c v√†... ng·ªß qu√™n m·∫•t bu·ªïi thi gi·ªØa k·ª≥ m√¥n Gi·∫£i T√≠ch 1.",
        choices: [
            { text: "Th√¥i xong...", nextEvent: 'GAME_OVER_NGU_QUEN_THI' } // Bad Ending t·ª©c th√¨
        ]
    },
    'DEFAULT_EVENT_KY_1': {
        image: "https://placehold.co/600x300/F59E0B/FFFFFF?text=Nha+An+B1",
        text: "M·ªôt bu·ªïi t·ªëi b√¨nh th∆∞·ªùng. B·∫°n quy·∫øt ƒë·ªãnh ƒÉn ·ªü nh√† ƒÉn B1.",
        choices: [
            { text: "ƒÇn c∆°m 15k", effects: { health: +15, happiness: +5 }, nextEvent: 'FINAL_EXAM_KY_1' },
            { text: "ƒÇn ph·ªü 25k", effects: { health: +20, happiness: +10 }, nextEvent: 'FINAL_EXAM_KY_1' }
        ]
    },
    'FINAL_EXAM_KY_1': {
        type: 'MINIGAME_RANDOM', // ƒê√¢y l√† mini-game
        text: "Thi cu·ªëi k·ª≥ Gi·∫£i T√≠ch 1! ƒê·ªÅ thi kh√≥, nh∆∞ng c√≥ m·ªôt c√¢u g·ª° ƒëi·ªÉm. Li·ªáu b·∫°n c√≥ l√†m ƒë√∫ng c√¢u n√†y kh√¥ng?",
        image: "https://placehold.co/600x300/111827/FFFFFF?text=THI+CUOI+KY",
        success: { text: "B·∫°n l√†m ƒë√∫ng c√¢u g·ª° ƒëi·ªÉm! B·∫°n qua m√¥n!", effects: { gpa: +0.2, happiness: +15 }, nextEvent: 'START_KY_2' },
        failure: { text: "B·∫°n l√†m sai c√¢u g·ª° ƒëi·ªÉm... T·∫°ch m√¥n.", effects: { gpa: -0.5, happiness: -20 }, nextEvent: 'START_KY_2' }
    },

    // --- H·ªåC K·ª≤ 2 ---
    'START_KY_2': {
        image: "https://placehold.co/600x300/A00000/FFFFFF?text=Hoc+Ky+2",
        text: "H·ªçc k·ª≥ 2 b·∫Øt ƒë·∫ßu. Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi V·∫≠t L√Ω ƒê·∫°i C∆∞∆°ng! C√≥ v·∫ª kh√≥ h∆°n...",
        choices: [
            { text: "Quy·∫øt t√¢m h·ªçc!", effects: { gpa: +0.1, happiness: -5 }, nextEvent: 'VAT_LY_1' },
            { text: "T√¨m ng∆∞·ªùi y√™u... (chuy·ªÉn sang NEU)", effects: { happiness: +20, health: +10 }, nextEvent: 'VAT_LY_1' },
        ]
    },
    'VAT_LY_1': {
        image: "https://placehold.co/600x300/166534/FFFFFF?text=Vat+Ly+Dai+Cuong",
        text: "Gi·ªù V·∫≠t L√Ω. Con l·∫Øc, l√≤ xo, ƒëi·ªán tr∆∞·ªùng... b·∫°n b·∫Øt ƒë·∫ßu th·∫•y n·∫£n.",
        choices: [
            { text: "H·ªçc ti·∫øp", effects: { gpa: +0.1, health: -10 }, nextEvent: 'FINAL_EXAM_KY_2' },
            { text: "Tr·ªën h·ªçc", effects: { gpa: -0.1, happiness: +10 }, nextEvent: 'FINAL_EXAM_KY_2' }
        ]
    },
    'FINAL_EXAM_KY_2': {
        type: 'TRANSITION', // ƒê√¢y l√† s·ª± ki·ªán chuy·ªÉn ti·∫øp
        text: 'B·∫°n ƒë√£ s·ªëng s√≥t qua H·ªçc K·ª≥ 2. M·ªát m·ªèi th·∫≠t.',
        nextEvent: 'FAST_FORWARD_START' // B·∫Øt ƒë·∫ßu tua nhanh
    },

    // --- TUA NHANH H·ªåC K·ª≤ 3-7 ---
    'FAST_FORWARD_START': {
        image: "https://placehold.co/600x300/4D7C0F/FFFFFF?text=Tua+Nhanh...",
        text: "Nh·ªØng h·ªçc k·ª≥ sau ƒë√≥ tr√¥i qua nh∆∞ m·ªôt c∆°n gi√≥. C∆° h·ªçc, Tri·∫øt h·ªçc, Th·ª±c t·∫≠p x∆∞·ªüng... B·∫°n ƒë√£ gi√† ƒëi tr√¥ng th·∫•y.",
        choices: [
            { text: "B·ªè qua 5 h·ªçc k·ª≥...", effects: { gpa: -0.5, health: -20, happiness: -20 }, nextEvent: 'START_KY_8' }
        ]
    },

    // --- H·ªåC K·ª≤ 8 (TR√ôM CU·ªêI) ---
    'START_KY_8': {
        image: "https://placehold.co/600x300/3730A3/FFFFFF?text=Hoc+Ky+8+-+DATN",
        text: "H·ªçc K·ª≥ 8! Ch·ªâ c√≤n m·ªôt th·ª© duy nh·∫•t: ƒê·ªì √Ån T·ªët Nghi·ªáp. B·∫°n ƒë√£ ch·ªçn ƒë∆∞·ª£c ƒë·ªÅ t√†i v√† gi√°o vi√™n h∆∞·ªõng d·∫´n.",
        choices: [
            { text: "C√†y ng√†y c√†y ƒë√™m", effects: { gpa: +0.3, health: -30, happiness: -30 }, nextEvent: 'BAO_VE_THU' },
            { text: "V·ª´a l√†m v·ª´a ch∆°i", effects: { gpa: -0.1, health: +10, happiness: +10 }, nextEvent: 'BAO_VE_THU' }
        ]
    },
    'BAO_VE_THU': {
        image: "https://placehold.co/600x300/0C4A6E/FFFFFF?text=Bao+Ve+Thu",
        text: "Bu·ªïi b·∫£o v·ªá th·ª≠. Th·∫ßy h∆∞·ªõng d·∫´n n√≥i: 'Code c·ªßa em v·∫´n c√≤n bug, slide th√¨ l√†m x·∫•u. V·ªÅ s·ª≠a ngay!'",
        choices: [
            { text: "V√¢ng ·∫°, em s·ª≠a ngay...", effects: { gpa: +0.1, happiness: -15 }, nextEvent: 'BAO_VE_CHINH_THUC' },
            { text: "K·ªá th·∫ßy, em t·ª± tin r·ªìi", effects: { happiness: +10 }, nextEvent: 'BAO_VE_CHINH_THUC' }
        ]
    },
    'BAO_VE_CHINH_THUC': {
        type: 'MINIGAME_RANDOM',
        text: "Ng√†y b·∫£o v·ªá ch√≠nh th·ª©c! B·∫°n ƒë·ª©ng tr∆∞·ªõc h·ªôi ƒë·ªìng. M·ªôt th·∫ßy h·ªèi c√¢u b·∫°n kh√¥ng ng·ªù t·ªõi. Li·ªáu b·∫°n c√≥ 'ch√©m' ƒë∆∞·ª£c kh√¥ng?",
        image: "https://placehold.co/600x300/111827/FFFFFF?text=BAO+VE+TOT+NGHIEP",
        success: { text: "B·∫°n tr·∫£ l·ªùi tr√¥i ch·∫£y! H·ªôi ƒë·ªìng g·∫≠t g√π.", effects: { gpa: +0.5, happiness: +100 }, nextEvent: 'WIN_GAME' },
        failure: { text: "B·∫°n ·∫•p √∫ng... Th·∫ßy l·∫Øc ƒë·∫ßu.", effects: { gpa: -0.5, happiness: -50 }, nextEvent: 'GAME_OVER_TRUOT_DATN' }
    },

    // --- K·∫æT TH√öC GAME (ENDINGS) ---
    'WIN_GAME': {
        type: 'END',
        title: 'üéâ CH√öC M·ª™NG T√ÇN K·ª∏ S∆Ø! üéâ',
        text: 'B·∫°n ƒë√£ t·ªët nghi·ªáp B√°ch Khoa ƒê√öNG H·∫†N! M·ªôt k·ª≥ t√≠ch!'
    },
    'GAME_OVER_VO_LE': {
        type: 'END',
        title: 'Thi·∫øu ƒëi·ªÉm r√®n luy·ªán',
        text: 'B·∫°n b·ªã 0 ƒëi·ªÉm r√®n luy·ªán, c·∫Øt h·ªçc b·ªïng. Ph·∫°t nh·∫£y 1 ƒëi·ªáu b√°ch khoa.'
    },
    'GAME_OVER_NGU_QUEN_THI': {
        type: 'END',
        title: 'Bad Ending: Ng·ªß qu√™n thi',
        text: '0 ƒëi·ªÉm gi·ªØa k·ª≥. M√¥n Gi·∫£i T√≠ch ch·∫Øc ch·∫Øn F. Con ƒë∆∞·ªùng ra tr∆∞·ªùng ƒë√∫ng h·∫°n ƒë√£ xa v·ªùi.'
    },
    'GAME_OVER_TRUOT_DATN': {
        type: 'END',
        title: 'GAME OVER',
        text: 'B·∫°n b·∫£o v·ªá kh√¥ng th√†nh c√¥ng. 6 th√°ng n·ªØa g·∫∑p l·∫°i.'
    },
    'GAME_OVER_GPA': {
        type: 'END',
        title: 'GAME OVER',
        text: 'GPA c·ªßa b·∫°n ƒë√£ xu·ªëng d∆∞·ªõi 1.0. H·ªôi ƒë·ªìng k·ª∑ lu·∫≠t ƒë√£ g·ª≠i th∆∞ v·ªÅ cho gia ƒë√¨nh b·∫°n.'
    },
    'GAME_OVER_HEALTH': {
        type: 'END',
        title: 'GAME OVER',
        text: 'B·∫°n ki·ªát s·ª©c v√† ng·∫•t x·ªâu trong th∆∞ vi·ªán. B·∫°n ph·∫£i b·∫£o l∆∞u 1 nƒÉm ƒë·ªÉ ch·ªØa b·ªánh.'
    },
    'GAME_OVER_HAPPINESS': {
        type: 'END',
        title: 'GAME OVER',
        text: 'B·∫°n c·∫£m th·∫•y qu√° √°p l·ª±c v√† kh√¥ng c√≤n t√¨m th·∫•y ni·ªÅm vui. B·∫°n quy·∫øt ƒë·ªãnh r√∫t h·ªì s∆°.'
    }
};
